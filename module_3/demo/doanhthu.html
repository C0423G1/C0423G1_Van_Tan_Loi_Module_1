<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap Date Range Picker</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker@3.0.5/daterangepicker.css">
</head>
<body>

<div class="container mt-5">
    <div class="form-row">
        <div class="col-md-6">
            <label for="dateRangePicker">Chọn khoảng thời gian:</label>
            <input type="text" class="form-control" id="dateRangePicker">
        </div>
        <div class="col-md-6">
            <button class="btn btn-primary" onclick="luuDuLieu()">Lưu vào cơ sở dữ liệu</button>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/daterangepicker@3.0.5/daterangepicker.min.js"></script>

<script>
    let startDate;
    let endDate;

    $(document).ready(function () {
        // Gán date range picker cho input
        $('#dateRangePicker').daterangepicker({
            startDate: moment().startOf('day'),
            endDate: moment().endOf('day'),
            locale: {
                format: 'DD/MM/YYYY',
                separator: ' - ',
                applyLabel: 'Chọn',
                cancelLabel: 'Hủy',
                customRangeLabel: 'Tùy chỉnh',
                daysOfWeek: ['CN', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7'],
                monthNames: [
                    'Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6',
                    'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'
                ],
                firstDay: 1
            }
        });

        // Lưu giá trị ngày bắt đầu và ngày kết thúc khi thay đổi date range
        $('#dateRangePicker').on('apply.daterangepicker', function(ev, picker) {
            startDate = picker.startDate;
            endDate = picker.endDate;
        });
    });

    function luuDuLieu() {
        if (startDate && endDate) {
            const startFormatted = startDate.format('YYYY-MM-DD');
            const endFormatted = endDate.format('YYYY-MM-DD');

            // Gửi dữ liệu đến máy chủ hoặc cơ sở dữ liệu
            // Ví dụ sử dụng Ajax hoặc form submit tại đây

            // Ghi log để kiểm tra giá trị đã chuẩn hóa
            console.log('Ngày bắt đầu:', startFormatted);
            console.log('Ngày kết thúc:', endFormatted);
        } else {
            console.log('Vui lòng chọn khoảng thời gian trước khi lưu.');
        }
    }
</script>

</body>
</html>
